# Interrupts

CPU收到外部的INT信号之后，将正在EX阶段的指令的PC放进SEPC寄存器（INT模块），将PC置为给定的中断跳转地址（直接把INT输入NPC模块），将IF/ID, ID/EX, EX/MEM三个流水线寄存器全部清空（前两个寄存器的清空使用Stall模块的flush信号，最后一个寄存器的清空，直接将INT送进EX/MEM）。

接下来，跳转到给定位置，有**中断处理程序**。中断处理程序一般是一段汇编代码，**并且带有eret**，才能返回。因此需要支持eret指令。

tbs: 程序状态寄存器，ecall? 与外部设备的连接？

如何判断中断的类型呢对于键盘和鼠标，做轮询操作定期查询键盘的状态寄存器或者缓冲区，看是否有新的按键或者鼠标事件产生。如果发现有新的鼠标事件产生，就把相应的中断原因编码存储在scause寄存器，并触发中断处理。

考虑到简洁性，大概率只用一个外部输入（键盘？），所以是不是只需要一个外部中断呢？这样的话就没有需要设置scause寄存器了吧？（因为所有的外部中断都来自键盘）。